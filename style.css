/* ======================================= BASE LAYOUT + SAFE AREA ====================================== */
:root{
  --bottom-nav-h:calc(74px + env(safe-area-inset-bottom));
  
  /* Theme variables - Burgundy (default) */
  --bg-gradient: radial-gradient(circle at top,#2a0a11 0%,#150307 55%,#090103 100%);
  --surface-color: rgba(35,10,18,.96);
  --surface-light: rgba(55,15,28,.85);
  --primary-color: #ff7ea6;
  --primary-light: #ff62b2;
  --primary-lighter: #ffc5e8;
  --primary-glow: rgba(255,100,180,.25);
  --primary-gloss: rgba(255,180,200,.08);
  --accent-gradient: linear-gradient(90deg,#ff62b2,#ffc5e8);
  --section-title-color: #ffe4f5;
  --text-color: #fff;
  --text-secondary: rgba(255,255,255,.82);
  --text-tertiary: rgba(255,225,230,.8);
  --text-muted: rgba(255,225,230,.8);
  --glass-bg: rgba(10,0,10,.78);
  --glass-bg-light: rgba(255,100,200,.08);
  --glass-border: rgba(255,190,240,.06);
  --glass-border-strong: rgba(255,130,200,.18);
  --glass-shadow: 0 0 24px rgba(255,40,200,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(255,100,200,.08);
  --button-border: rgba(255,130,200,.18);
  --card-glow: rgba(255,80,200,.08);
  --border-glow: rgba(245,100,180,.35);
}

/* ========== FINAL REFINEMENT: Targeted centering for remaining iPad outliers ========== */
@media (min-width: 768px) {
  /* Home headline + subtitle group */
  #home .hero {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  #home .hero-title,
  #home .hero-sub,
  #home .hero-sub2 {
    text-align: center;
    max-width: 700px;
    margin-left: 0; /* keep left-aligned text inside the centered container */
    margin-right: 0;
  }

  /* Lesson trigger and dropdown should align with hero */
  .lesson-trigger,
  .lesson-dropdown {
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

  /* Test question + options */
  .test-screen {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
  }

  .test-body,
  #ts_question,
  #tt_question,
  #tres_summary,
  #tt_options {
    max-width: 700px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  /* Ensure single-column blocks match the same visual column */
  .new-lesson-panel,
  .stats-section,
  .fav-tokens,
  #tres_list,
  #dict_list {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }
}

@media (min-width: 1024px) {
  /* Home headline + subtitle group (landscape) */
  #home .hero {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  #home .hero-title,
  #home .hero-sub,
  #home .hero-sub2 {
    max-width: 920px;
    margin-left: 0;
    margin-right: 0;
  }

  /* Lesson trigger and dropdown */
  .lesson-trigger,
  .lesson-dropdown {
    max-width: 920px;
    margin-left: auto;
    margin-right: auto;
    display: block;
  }

  /* Test question + options */
  .test-screen {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }

  .test-body,
  #ts_question,
  #tt_question,
  #tres_summary,
  #tt_options {
    max-width: 920px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  /* Single-column blocks align to the same column */
  .new-lesson-panel,
  .stats-section,
  .fav-tokens,
  #tres_list,
  #dict_list {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }
}

/* ========== Semantic feedback colors: always theme-agnostic ========== */
/* Ensure test answer feedback uses fixed success/error colors regardless of theme */
.test-screen .test-variant-btn.correct {
  background: rgba(40, 167, 69, 0.25) !important; /* semantic green */
  border-color: #218838 !important;
  color: #ffffff !important;
  box-shadow: 0 6px 18px rgba(40,167,69,0.12), inset 0 0 8px rgba(255,255,255,0.04) !important;
}
.test-screen .test-variant-btn.wrong {
  background: rgba(220, 53, 69, 0.25) !important; /* semantic red */
  border-color: #c82333 !important;
  color: #ffffff !important;
  box-shadow: 0 6px 18px rgba(220,53,69,0.12), inset 0 0 8px rgba(255,255,255,0.04) !important;
}

/* Also ensure disabled/active states keep contrast */
.test-screen .test-variant-btn.correct:active,
.test-screen .test-variant-btn.wrong:active {
  transform: scale(.98);
}

/* Results list items semantics (also ensure they don't inherit theme accents) */
.result-item.correct {
  background: rgba(40,167,69,0.06) !important;
  border-color: rgba(40,167,69,0.18) !important;
}
.result-item.wrong {
  background: rgba(220,53,69,0.06) !important;
  border-color: rgba(220,53,69,0.18) !important;
}
/* ðŸ· Burgundy Theme */
:root.theme-burgundy {
  --bg-gradient: radial-gradient(circle at top,#2a0a11 0%,#150307 55%,#090103 100%);
  --surface-color: rgba(35,10,18,.96);
  --surface-light: rgba(55,15,28,.85);
  --primary-color: #ff7ea6;
  --primary-light: #ff62b2;
  --primary-lighter: #ffc5e8;
  --primary-glow: rgba(255,100,180,.25);
  --primary-gloss: rgba(255,180,200,.08);
  --accent-gradient: linear-gradient(90deg,#ff62b2,#ffc5e8);
  --section-title-color: #ffe4f5;
  --glass-bg-light: rgba(255,100,200,.08);
  --glass-border-strong: rgba(255,130,200,.18);
  --glass-shadow: 0 0 24px rgba(255,40,200,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(255,100,200,.08);
  --button-border: rgba(255,130,200,.18);
  --card-glow: rgba(255,80,200,.08);
  --border-glow: rgba(245,100,180,.35);
}

/* ðŸŒ² Emerald Green Theme */
:root.theme-emerald {
  --bg-gradient: radial-gradient(circle at top,#0d3a2a 0%,#061f15 55%,#030f0a 100%);
  --surface-color: rgba(15,50,30,.96);
  --surface-light: rgba(30,70,50,.85);
  --primary-color: #4aced5;
  --primary-light: #30bcc7;
  --primary-lighter: #8de8f0;
  --primary-glow: rgba(78,205,213,.25);
  --primary-gloss: rgba(141,232,240,.08);
  --accent-gradient: linear-gradient(90deg,#30bcc7,#8de8f0);
  --section-title-color: #c4eff5;
  --glass-bg-light: rgba(78,205,213,.08);
  --glass-border-strong: rgba(78,205,213,.18);
  --glass-shadow: 0 0 24px rgba(78,205,213,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(78,205,213,.08);
  --button-border: rgba(78,205,213,.18);
  --card-glow: rgba(78,205,213,.08);
  --border-glow: rgba(48,188,199,.35);
}

/* ðŸŒŠ Ocean Blue Theme */
:root.theme-ocean {
  --bg-gradient: radial-gradient(circle at top,#0a2a3e 0%,#051419 55%,#020810 100%);
  --surface-color: rgba(10,40,60,.96);
  --surface-light: rgba(20,60,90,.85);
  --primary-color: #5eb3ff;
  --primary-light: #3ba5ff;
  --primary-lighter: #8fd7ff;
  --primary-glow: rgba(94,179,255,.25);
  --primary-gloss: rgba(143,215,255,.08);
  --accent-gradient: linear-gradient(90deg,#3ba5ff,#8fd7ff);
  --section-title-color: #d4e9ff;
  --glass-bg-light: rgba(94,179,255,.08);
  --glass-border-strong: rgba(94,179,255,.18);
  --glass-shadow: 0 0 24px rgba(94,179,255,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(94,179,255,.08);
  --button-border: rgba(94,179,255,.18);
  --card-glow: rgba(94,179,255,.08);
  --border-glow: rgba(59,165,255,.35);
}

/* ðŸ”¥ Crimson Red Theme */
:root.theme-crimson {
  --bg-gradient: radial-gradient(circle at top,#3a1515 0%,#1f0a0a 55%,#0f0505 100%);
  --surface-color: rgba(50,15,15,.96);
  --surface-light: rgba(70,20,20,.85);
  --primary-color: #ff5555;
  --primary-light: #ff3333;
  --primary-lighter: #ff8888;
  --primary-glow: rgba(255,85,85,.25);
  --primary-gloss: rgba(255,136,136,.08);
  --accent-gradient: linear-gradient(90deg,#ff3333,#ff8888);
  --section-title-color: #ffcccc;
  --glass-bg-light: rgba(255,85,85,.08);
  --glass-border-strong: rgba(255,85,85,.18);
  --glass-shadow: 0 0 24px rgba(255,85,85,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(255,85,85,.08);
  --button-border: rgba(255,85,85,.18);
  --card-glow: rgba(255,85,85,.08);
  --border-glow: rgba(255,51,51,.35);
}

/* ðŸ’Ž Turquoise Theme */
:root.theme-turquoise {
  --bg-gradient: radial-gradient(circle at top,#0f3a3a 0%,#082020 55%,#041010 100%);
  --surface-color: rgba(15,60,60,.96);
  --surface-light: rgba(25,80,80,.85);
  --primary-color: #1ecccf;
  --primary-light: #00b8bb;
  --primary-lighter: #5ae5e8;
  --primary-glow: rgba(30,204,207,.25);
  --primary-gloss: rgba(90,229,232,.08);
  --accent-gradient: linear-gradient(90deg,#00b8bb,#5ae5e8);
  --section-title-color: #b8f0f2;
  --glass-bg-light: rgba(30,204,207,.08);
  --glass-border-strong: rgba(30,204,207,.18);
  --glass-shadow: 0 0 24px rgba(30,204,207,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(30,204,207,.08);
  --button-border: rgba(30,204,207,.18);
  --card-glow: rgba(30,204,207,.08);
  --border-glow: rgba(0,184,187,.35);
}

/* ðŸŒ™ Midnight Blue Theme */
:root.theme-midnight {
  --bg-gradient: radial-gradient(circle at top,#0f1a2e 0%,#0a0f18 55%,#050810 100%);
  --surface-color: rgba(15,25,50,.96);
  --surface-light: rgba(25,40,70,.85);
  --primary-color: #7fa8ff;
  --primary-light: #5f92ff;
  --primary-lighter: #b3d4ff;
  --primary-glow: rgba(127,168,255,.25);
  --primary-gloss: rgba(179,212,255,.08);
  --accent-gradient: linear-gradient(90deg,#5f92ff,#b3d4ff);
  --section-title-color: #d9e4ff;
  --glass-bg-light: rgba(127,168,255,.08);
  --glass-border-strong: rgba(127,168,255,.18);
  --glass-shadow: 0 0 24px rgba(127,168,255,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(127,168,255,.08);
  --button-border: rgba(127,168,255,.18);
  --card-glow: rgba(127,168,255,.08);
  --border-glow: rgba(95,146,255,.35);
}

/* ðŸ‡ Purple Noir Theme */
:root.theme-noir {
  --bg-gradient: radial-gradient(circle at top,#2a1a3e 0%,#140d1f 55%,#0a0610 100%);
  --surface-color: rgba(35,20,50,.96);
  --surface-light: rgba(50,30,70,.85);
  --primary-color: #d97eff;
  --primary-light: #c755ff;
  --primary-lighter: #e9c7ff;
  --primary-glow: rgba(217,126,255,.25);
  --primary-gloss: rgba(233,199,255,.08);
  --accent-gradient: linear-gradient(90deg,#c755ff,#e9c7ff);
  --section-title-color: #f0d9ff;
  --glass-bg-light: rgba(217,126,255,.08);
  --glass-border-strong: rgba(217,126,255,.18);
  --glass-shadow: 0 0 24px rgba(217,126,255,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(217,126,255,.08);
  --button-border: rgba(217,126,255,.18);
  --card-glow: rgba(217,126,255,.08);
  --border-glow: rgba(199,85,255,.35);
}

/* ðŸŒ… Sunset Orange Theme */
:root.theme-sunset {
  --bg-gradient: radial-gradient(circle at top,#3d2516 0%,#1f1309 55%,#0f0904 100%);
  --surface-color: rgba(55,30,15,.96);
  --surface-light: rgba(75,45,25,.85);
  --primary-color: #ffa27b;
  --primary-light: #ff8a5c;
  --primary-lighter: #ffcfb8;
  --primary-glow: rgba(255,162,123,.25);
  --primary-gloss: rgba(255,207,184,.08);
  --accent-gradient: linear-gradient(90deg,#ff8a5c,#ffcfb8);
  --section-title-color: #ffe5d4;
  --glass-bg-light: rgba(255,162,123,.08);
  --glass-border-strong: rgba(255,162,123,.18);
  --glass-shadow: 0 0 24px rgba(255,162,123,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(255,162,123,.08);
  --button-border: rgba(255,162,123,.18);
  --card-glow: rgba(255,162,123,.08);
  --border-glow: rgba(255,138,92,.35);
}

/* â„ï¸ Ice Gray Theme */
:root.theme-ice {
  --bg-gradient: radial-gradient(circle at top,#1a2530 0%,#0f1519 55%,#080a0d 100%);
  --surface-color: rgba(25,35,50,.96);
  --surface-light: rgba(40,55,75,.85);
  --primary-color: #a8d5e5;
  --primary-light: #7fc9dd;
  --primary-lighter: #d4e9f5;
  --primary-glow: rgba(168,213,229,.25);
  --primary-gloss: rgba(212,233,245,.08);
  --accent-gradient: linear-gradient(90deg,#7fc9dd,#d4e9f5);
  --section-title-color: #e3f0f5;
  --glass-bg-light: rgba(168,213,229,.08);
  --glass-border-strong: rgba(168,213,229,.18);
  --glass-shadow: 0 0 24px rgba(168,213,229,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(168,213,229,.08);
  --button-border: rgba(168,213,229,.18);
  --card-glow: rgba(168,213,229,.08);
  --border-glow: rgba(127,201,221,.35);
}

/* ðŸŒŒ Deep Space Theme */
:root.theme-space {
  --bg-gradient: radial-gradient(circle at top,#0a0f20 0%,#050810 55%,#020306 100%);
  --surface-color: rgba(10,15,35,.96);
  --surface-light: rgba(20,30,55,.85);
  --primary-color: #9d9dff;
  --primary-light: #7d7dff;
  --primary-lighter: #c9c9ff;
  --primary-glow: rgba(157,157,255,.25);
  --primary-gloss: rgba(201,201,255,.08);
  --accent-gradient: linear-gradient(90deg,#7d7dff,#c9c9ff);
  --section-title-color: #e6e6ff;
  --glass-bg-light: rgba(157,157,255,.08);
  --glass-border-strong: rgba(157,157,255,.18);
  --glass-shadow: 0 0 24px rgba(157,157,255,.12),0 12px 32px rgba(0,0,0,.85);
  --button-bg: rgba(157,157,255,.08);
  --button-border: rgba(157,157,255,.18);
  --card-glow: rgba(157,157,255,.08);
  --border-glow: rgba(125,125,255,.35);
}

html,body{user-select: none; margin:0;padding:0;height:100svh;overscroll-behavior:none;background:var(--bg-gradient);font-family:Comfortaa,system-ui,-apple-system,BlinkMacSystemFont,sans-serif;font-size:15px;line-height:1.4;color:var(--text-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;user-select:none;padding-top:env(safe-area-inset-top);padding-left:env(safe-area-inset-left);padding-right:env(safe-area-inset-right)}
body{display:flex;flex-direction:column;overflow-x:hidden;overflow-y:hidden;flex:1}
.screen{width:100%;height:100%;display:flex;flex-direction:column;overflow-y:auto;flex-shrink:0}
*,*:before,*:after{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
input,textarea,button,select{border:none;background:none;appearance:none;font-family:inherit}
.hidden{display:none!important}
html.lock,body.lock{overflow:hidden;touch-action:none}
/* === PAGE LOADER === */
.pw-loader{position:fixed;inset:0;padding:env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);display:flex;align-items:center;justify-content:center;background:var(--bg-gradient);z-index:9999;opacity:1;transform:translateY(0);transition:opacity .55s ease,transform .55s ease}
.pw-loader.hide{opacity:0;transform:translateY(8px);pointer-events:none}
.pw-loader-inner{min-width:220px;padding:30px 34px 26px;border-radius:26px;background:radial-gradient(circle at 20% 10%,var(--primary-gloss),transparent 60%),linear-gradient(180deg,var(--surface-color),var(--surface-light));border:1px solid var(--glass-border-strong);backdrop-filter:blur(22px);box-shadow:0 0 0 1px rgba(255,255,255,.05),0 18px 40px rgba(0,0,0,.75),0 4px 18px var(--border-glow);text-align:center;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif}
.pw-avatar-wrap{width:78px;height:78px;border-radius:999px;position:relative;margin:0 auto 16px;overflow:hidden;box-shadow:0 0 0 1px rgba(255,255,255,.18),0 10px 28px rgba(0,0,0,.55)}
.pw-avatar-wrap img{width:100%;height:100%;object-fit:cover}
.pw-ring{position:absolute;inset:0;border-radius:inherit;pointer-events:none;border:2px solid var(--primary-glow);box-shadow:0 0 14px var(--primary-glow),0 0 30px var(--primary-gloss);animation:pw-pulse 2s ease-in-out infinite}
.pw-app-name{font-size:1rem;font-weight:600;letter-spacing:.12em;text-transform:uppercase;color:var(--primary-lighter);margin-bottom:4px}
.pw-subtitle{font-size:.8rem;color:var(--text-secondary);margin-bottom:16px}
.pw-dots{display:inline-flex;gap:5px;justify-content:center}
.pw-dots span{width:6px;height:6px;border-radius:999px;background:var(--primary-lighter);opacity:.25;transform:translateY(0);animation:pw-dot 1.2s ease-in-out infinite}
.pw-dots span:nth-child(2){animation-delay:.15s}
.pw-dots span:nth-child(3){animation-delay:.3s}
@keyframes pw-pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}
@keyframes pw-dot{0%{opacity:.25;transform:translateY(0)}30%{opacity:1;transform:translateY(-3px)}60%{opacity:.4;transform:translateY(0)}100%{opacity:.25;transform:translateY(0)}}
/* ======================================= PAGE: HOME OS ====================================== */
.home-os{padding:calc(env(safe-area-inset-top) + 12px) 1.6rem 5rem;display:flex;flex-direction:column;gap:2.4rem;align-items:center;height:100%;overflow-y:auto;flex-shrink:0}
.home-os>*{width:100%;max-width:620px}
#home{padding-top:0!important}
/* ======================================= HERO ====================================== */
.hero-title{font-size:2.2rem;font-weight:900;letter-spacing:-.035em;color:var(--text-color);line-height:1.2}
.hero-title span{background:var(--accent-gradient);-webkit-background-clip:text;background-clip:text;color:transparent}
.hero-sub{margin-top:.6rem;font-size:.97rem;max-width:420px;line-height:1.55;opacity:.88}
.hero-sub2{text-align: center;margin-top:.45rem;font-size:.82rem;line-height:1.45;opacity:.62;max-width:420px;color:rgba(255,255,255,.75);}
/* ======================================= HUD ====================================== */
.section-title{font-size:1.25rem;font-weight:700;letter-spacing:-.015em;color:var(--section-title-color);display:flex;gap:.35rem;align-items:center}
.section-title::before{content:"";width:6px;height:6px;border-radius:3px;background:radial-gradient(circle,var(--primary-light),transparent);box-shadow:0 0 10px var(--primary-light)}
.hud-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:.8rem}
.hud-item{display: flex; flex-direction: column; justify-content: center; align-items: center; gap: 6px; background:var(--glass-bg-light);border:1px solid var(--glass-border-strong);border-radius:14px;padding:.85rem .5rem;text-align:center;transition:.22s ease}
.hud-value{font-size:1.7rem;font-weight:800;color:var(--primary-color)}
.hud-label{font-size:.78rem;opacity:.78}
/* ======================================= FAVORITES TOKENS ====================================== */
.token-list{display:flex;flex-wrap:wrap; gap:.55rem;list-style:none;margin-top:.5rem}
.token-list li{padding:.55rem .9rem;background:var(--glass-bg-light);border:1px solid var(--glass-border-strong);border-radius:999px;font-size:1rem;color:var(--primary-lighter);transition:.15s ease}
/* ======================================= BOTTOM NAVIGATION ====================================== */
.pw-bnb{position:fixed;left:0;right:0;bottom:0;display:flex;justify-content:center;padding:0 16px calc(16px + env(safe-area-inset-bottom));pointer-events:none;z-index:999;animation:bnbFade .48s cubic-bezier(.16,1,.3,1)}
@keyframes bnbFade{from{opacity:0;transform:translateY(28px)}to{opacity:1;transform:translateY(0)}}
.bnb-shell{width:100%;max-width:520px;pointer-events:auto;display:flex;align-items:center;gap:5px;padding:5px 8px;border-radius:999px;background:var(--glass-bg);backdrop-filter:blur(18px)saturate(140%);border:1px solid var(--glass-border);box-shadow:var(--glass-shadow)}
.bnb-item{flex:1;height:42px;display:flex;flex-direction:column;justify-content:center;align-items:center;gap:1px;font-size:.72rem;border-radius:999px;color:rgba(255,255,255,.82);transition:background .18s,transform .14s,color .18s}
.bnb-item:active{transform:translateY(1px)scale(.97)}
.bnb-item.is-active{background:linear-gradient(145deg,var(--surface-light),var(--surface-color));color:var(--primary-light);box-shadow:0 0 0 1px var(--primary-glow),0 8px 22px rgba(0,0,0,.9),0 0 14px var(--border-glow)}
.bnb-icon svg{width:20px;height:20px;stroke:currentColor;stroke-width:2.2;fill:none;transition:.22s}
.bnb-item.is-active .bnb-icon svg{filter:drop-shadow(0 0 4px var(--primary-glow))}
.bnb-label{font-size:.68rem;opacity:.92}
.bnb-item.is-active .bnb-label{font-size:.72rem;font-weight:600}
@supports(padding-bottom:env(safe-area-inset-bottom)){.pw-bnb{padding-bottom:calc(14px + env(safe-area-inset-bottom))}}
/* ======================================= iPad Landscape ====================================== */
@media (min-width:820px){
.home-os{gap:3.2rem}
.hero-title{font-size:3rem}
.hud-value{font-size:2rem}
.hud-item{padding:1.05rem .65rem}
.token-list li{font-size:1.05rem;padding:.65rem 1.1rem}}
/* =========================== LESSON PICKER =========================== */
.lesson-trigger{margin-top:1.2rem;padding:.85rem 1.2rem;width:100%;max-width:420px;border-radius:16px;font-size:1rem;font-weight:600;background:linear-gradient(150deg,var(--primary-gloss),var(--surface-color));border:1px solid var(--glass-border-strong);color:var(--primary-lighter);backdrop-filter:blur(12px);box-shadow:0 0 10px var(--primary-glow),inset 0 0 12px var(--primary-gloss);display:flex;align-items:center;justify-content:center;cursor:pointer;transition:.25s ease}
.lesson-trigger:active{transform:translateY(1px)scale(.97)}
.lesson-dropdown{margin-top:.8rem;width:100%;max-width:420px;background:linear-gradient(170deg,var(--primary-gloss),var(--surface-light));border:1px solid var(--glass-border-strong);border-radius:18px;backdrop-filter:blur(18px);box-shadow:0 10px 22px rgba(0,0,0,.55),inset 0 0 14px var(--primary-gloss);padding:.8rem .6rem;display:flex;flex-direction:column;gap:.35rem;max-height:260px;overflow-y:auto}
.lesson-option{padding:.8rem 1rem;border-radius:14px;background:var(--glass-bg-light);border:1px solid var(--glass-border-strong);font-size:.9rem;text-align:left;cursor:pointer;display:flex;flex-direction:column;gap:2px;transition:.25s ease}
.lesson-option span{font-weight:600;color:var(--primary-lighter)}
.lesson-option small{font-size:.78rem;opacity:.8}
.bnb-item.disabled{opacity:.35;filter:blur(1px) saturate(40%);pointer-events:none}
/* ======================================= NEW LESSON PANEL ====================================== */
.new-lesson-panel{padding:1.4rem 1.4rem;border-radius:18px;background:linear-gradient(150deg,var(--primary-gloss),var(--surface-color));border:1px solid var(--glass-border-strong);box-shadow:0 0 18px var(--card-glow),0 14px 34px rgba(0,0,0,.66),inset 0 0 20px var(--primary-gloss)}
.new-lesson-card{margin-top:.8rem;padding:.9rem 1rem;border-radius:16px;background:var(--glass-bg-light);border:1px solid var(--glass-border-strong);backdrop-filter:blur(10px);display:flex;flex-direction:column;gap:4px;cursor:pointer;transition:.25s ease}
.new-lesson-card-title{font-size:1.05rem;font-weight:700;color:var(--primary-lighter)}
.new-lesson-card-desc{font-size:.82rem;opacity:.85}
/* ======== CARDS PAGE ======== */
.cards-page{display:flex;flex-direction:column;align-items:center;justify-content:flex-start;height:100%;padding-top:3.2rem;gap:1.3rem;overflow:hidden}
#cardsLessonName{font-family:Comfortaa,sans-serif;font-size:2rem;color:var(--section-title-color);text-shadow:0 10px 30px rgba(0,0,0,.7);text-align:center}
.cards-progress{width:80%;height:6px;border-radius:4px;overflow:hidden;background:var(--primary-glow);margin-top:.2rem}
.cards-progress-fill{height:100%;width:0%;border-radius:inherit;background:var(--accent-gradient);transition:width .28s ease}
.card{width:360px;height:220px;margin-top:1.8rem;perspective:900px;display:flex;align-items:center;justify-content:center;cursor:pointer}
.card-inner{width:100%;height:100%;position:relative;transition:transform .45s ease;transform-style:preserve-3d}
.card.flipped .card-inner{transform:rotateY(180deg)}
.card-face{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;text-align:center;font-size:1.9rem;font-weight:600;text-shadow:0 12px 30px rgba(0,0,0,.85);padding:1.2rem;border-radius:18px;backdrop-filter:blur(10px);border:1px solid var(--glass-border-strong);backface-visibility:hidden;background:radial-gradient(circle at top left,rgba(255,255,255,.14),transparent 60%),var(--surface-color)}
.card-back{transform:rotateY(180deg);background:radial-gradient(circle at top left,var(--primary-gloss),transparent 60%),var(--surface-light)}
.card-controls{display:flex;gap:1rem;margin-top:1.4rem}
.prevbt,.nextbt{font-size:1.4rem;font-weight:600;padding:.7rem 1.2rem;border-radius:10px;cursor:pointer;background:var(--surface-color);border:1px solid var(--glass-border-strong);color:var(--text-color);backdrop-filter:blur(12px);transition:.22s ease;box-shadow:0 6px 16px rgba(0,0,0,.55)}
.prevbt:active,.nextbt:active{transform:scale(.96)}
/* NEW WORDS / FAVORITES PANEL */
.new-lesson-card{display:flex;flex-direction:column;gap:10px;padding:14px;background:var(--glass-bg-light);border-radius:14px;backdrop-filter:blur(8px)}
.fav-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.fav-item{display:flex;align-items:center;justify-content:space-between;gap:8px;background:var(--glass-bg-light);border-radius:12px;padding:10px 12px;min-height:48px}
.fav-text{display:flex;flex-direction:column;gap:2px}
.fav-ru{font-size:1rem;font-weight:600;color:var(--primary-lighter)}
.fav-en{font-size:.85rem;opacity:.75;color:var(--text-secondary)}
.fav-del{flex-shrink:0;border:none;background:none;font-size:18px;line-height:1;cursor:pointer;padding:4px;color:rgba(255,255,255,.55);transition:.15s ease}
.fav-tokens{margin-bottom: 1.3rem;}
/*STATS SECTION*/
.stats-section{display:flex;flex-direction:column;gap:1.4rem;padding:1.6rem 1.4rem}
.stats-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:1.3rem}
.stats-circle{position:relative;padding:14px 0;display:flex;flex-direction:column;align-items:center;cursor:pointer;transition:.25s ease}
.circle-svg{width:96px;height:96px}
.circle-svg .bg{stroke:var(--primary-glow);stroke-width:6;fill:none}
.circle-svg .fg{stroke:var(--primary-light);stroke-width:6;fill:none;stroke-linecap:round;transform:rotate(-90deg);transform-origin:center;stroke-dasharray:282;stroke-dashoffset:282}
.circle-label{margin-top:.5rem;display:flex;flex-direction:column;align-items:center;gap:2px;text-align:center}
.circle-name{font-size:.85rem;font-weight:600;opacity:.9}
.circle-pct{font-size:1.05rem;font-weight:700;color:var(--primary-color)}
.stats-refresh-btn{height:42px;padding:0 1.4rem;display:flex;align-items:center;justify-content:center;font-size:.9rem;font-weight:600;border-radius:14px;cursor:pointer;background:var(--button-bg);border:1px solid var(--glass-border-strong);color:var(--primary-lighter);backdrop-filter:blur(10px);transition:.25s ease;}
.stats-refresh-btn:active{transform:scale(.96);}
.stats-toggle-btn{width:42px;height:42px;display:flex;justify-content:center;align-items:center;border-radius:14px;cursor:pointer;background:var(--button-bg);border:1px solid var(--glass-border-strong);color:var(--primary-lighter);backdrop-filter:blur(10px);transition:.25s ease;}
.stats-toggle-btn:active{transform:scale(.96);}
.hidden{display:none}
/*TEST*/
#test{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content: center;
  text-align: center;
  width:100%;
  height:100%;
  padding:0;
  margin:0;
  overflow-y:auto;
}

/* Ð¾Ð±Ñ‰Ð°Ñ Ð¾Ð±Ð¾Ð»Ð¾Ñ‡ÐºÐ° ÑÐºÑ€Ð°Ð½Ð¾Ð² */
.test-screen{
  flex:1;
  width:100%;
  display:flex;
  flex-direction:column;
  padding-bottom:var(--bottom-nav-h);
}

/* HEADER */
.test-header{
  height:60px;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  pointer-events:none;
  position:relative;
}
.test-header h2{
  font-family:Comfortaa,sans-serif;
  font-size:2rem;
  font-weight:700;
  color:var(--section-title-color);
  text-shadow:0 10px 30px rgba(0,0,0,.7);
}

/* BODY */
.test-body{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
  gap:0.8rem;
  width:100%;
  max-width:420px;
  padding:1.2rem 1rem;
}

#ts_question,
#tt_question,
#tres_summary{
  font-size:1.15rem;
  line-height:1.55;
  color:var(--primary-lighter);
  opacity:.95;
  max-width:380px;
}

#tt_question u{color:var(--primary-lighter)}

/* BUTTONS */
.test-main-btn{
  padding:.9rem 1.4rem;
  width:100%;
  max-width:360px;
  border-radius:16px;
  font-size:1.05rem;
  font-weight:600;
  text-align:center;
  margin: 0 auto;
  cursor:pointer;
  background:linear-gradient(160deg,var(--primary-gloss),var(--surface-color));
  border:1px solid var(--glass-border-strong);
  backdrop-filter:blur(14px);
  color:var(--primary-lighter);
  box-shadow:0 4px 18px rgba(0,0,0,.55), inset 0 0 18px var(--primary-gloss);
  transition:.25s ease;
}
.test-main-btn:active{transform:scale(.95)}
.tres-restart-btn {margin-top: 1.5rem;}
#testSkipBtn,.test-skip-btn{display:inline-block}
#testSkipBtn{
  position:absolute;
  top:3.5rem;
  right:12px;
  pointer-events:none; /* enabled by JS when visible */
  background:transparent;
  border:1px solid var(--glass-border-strong);
  color:var(--primary-lighter);
  padding:.45rem .6rem;
  border-radius:10px;
  font-weight:700;
  font-size:0.9rem;
  backdrop-filter:blur(8px);
}
#tt_options{
  display:flex;
  flex-direction:column;
  gap:.6rem;
  width:100%;
  max-width:360px;
}

.test-variant-btn{
  width:100%;
  padding:.88rem 1.2rem;
  border-radius:14px;
  font-size:1rem;
  font-weight:600;
  text-align:center;
  cursor:pointer;
  color:var(--section-title-color);
  background:var(--button-bg);
  border:1px solid var(--glass-border-strong);
  backdrop-filter:blur(10px);
  box-shadow:0 6px 18px rgba(0,0,0,.55), inset 0 0 10px var(--primary-gloss);
  transition:.25s ease;
}
.test-variant-btn:active{transform:scale(.95)}
.test-variant-btn[disabled]{pointer-events:none;opacity:.95}
.test-variant-btn.correct{
  background:var(--primary-glow);
  border-color:var(--primary-light);
  color:var(--text-color);
}
.test-variant-btn.wrong{
  background:var(--primary-glow);
  border-color:var(--primary-light);
  color:var(--text-color);
}

/* COUNTER */
#tt_counter_wrap{
  height:55px;
  width:100%;
  display:flex;
  justify-content:center;
  align-items:flex-start;
  pointer-events:none;
}
#tt_counter{
  font-size:.95rem;
  font-weight:600;
  color:var(--primary-lighter);
  opacity:.88;
  letter-spacing:.6px;
  text-shadow:0 4px 14px rgba(0,0,0,.45);
  user-select:none;
  backdrop-filter:blur(6px);
  padding:.35rem .9rem;
  border-radius:14px;
  background:var(--button-bg);
  border:1px solid var(--glass-border-strong);
}

/* SUMMARY */
#testSummaryScreen{
  display:flex;
  flex-direction:column;
  align-items:center;
  width:100%;
}

.test-summary-header{
  height:70px;
  display:flex;
  justify-content:center;
  align-items:flex-end;
  pointer-events:none;
}

.test-summary-body{
  flex:1;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  gap:0.9rem;
  text-align:center;
  padding:0 1.6rem;
}

.tres_title{
  font-family:Comfortaa,sans-serif;
  font-size:2rem;
  font-weight:700;
  color:var(--section-title-color);
  text-shadow:0 10px 30px rgba(0,0,0,.7);
}

/* FULL REPORT */
#testResultScreen{
  display:flex;
  flex-direction:column;
  align-items:center;
  width:100%;
  height:100%;
  overflow:hidden;
}

.tres-header-fixed{
  display:none;
}

#tres_scroll{
  flex:1;
  width:100%;
  overflow-y:auto;
  padding:1.6rem 0 var(--bottom-nav-h);
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
  min-height:0;
  display:flex;
  flex-direction:column;
  align-items:center;
}

#tres_list{
  width:100%;
  max-width:400px;
  padding:0 1rem;
  display:flex;
  flex-direction:column;
  gap:0.9rem;
  align-items:stretch;
}
/* Result item cards */
.result-item{
  padding:1rem;
  border-radius:14px;
  backdrop-filter:blur(12px);
  border:1px solid var(--glass-border-strong);
  background:var(--glass-bg-light);
  display:flex;
  flex-direction:column;
  gap:0.5rem;
  transition:.25s ease;
  min-height:auto;
}

.result-item.correct{
  border-color:rgba(70,220,140,.55);
  background:var(--surface-color);
  box-shadow:0 0 16px rgba(70,220,140,.2),inset 0 0 1px rgba(70,220,140,.3);
}

.result-item.correct .question{
  color:var(--text-color);
  font-weight:600;
}

.result-item.correct u{
  color:var(--primary-lighter);
  font-weight:600;
  text-decoration:none;
}

.result-item.wrong{
  border-color:rgba(255,80,100,.55);
  background:var(--surface-color);
  box-shadow:0 0 16px rgba(255,80,100,.2),inset 0 0 1px rgba(255,80,100,.3);
}

.result-item.wrong .question{
  color:var(--text-color);
  font-weight:600;
}

.result-item.wrong u{
  color:var(--primary-lighter);
  font-weight:600;
  text-decoration:none;
}

.result-item .question{
  font-size:1rem;
  line-height:1.5;
  color:var(--primary-lighter);
  margin:0;
}

.result-item > div:not(.question){
  font-size:0.9rem;
  color:var(--text-secondary);
  line-height:1.4;
}

.result-item b{
  color:var(--primary-lighter);
  font-weight:600;
}

/* Retry button for test result screen (removed duplicate buttons â€” keep the primary `tres_retry` control) */

/* ======================================= PERSISTENT LEARNING RESULT STYLES ====================================== */

/* Summary Container with Progress Ring */
.tres-summary-container {
  width: 100%;
  max-width: 420px;
  margin: 0 auto 1.6rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  padding: clamp(12px, 2.6vw, 22px);
  background: linear-gradient(170deg, var(--primary-gloss), var(--surface-light));
  border: 1px solid var(--glass-border);
  border-radius: 20px;
  backdrop-filter: blur(12px);
  box-shadow: 0 6px 20px var(--card-glow);
}

.tres-lesson-name {
  font-family: Comfortaa, sans-serif;
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--section-title-color);
  margin: 0;
  text-align: center;
  text-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
}

.tres-progress-ring-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  /* stack ring above label to place label below ring */
  flex-direction: column;
  gap: 0.6rem;
  width: clamp(120px, 30vw, 140px); /* default (phones) */
  height: clamp(120px, 30vw, 140px);
}

@media (min-width: 768px) {
  .tres-progress-ring-wrapper {
    width: clamp(160px, 22vw, 180px); /* iPad targets */
    height: clamp(160px, 22vw, 180px);
  }
}

.tres-progress-ring {
  width: 100%;
  height: 100%;
  transform: rotate(-90deg);
  display: block;
}

.tres-progress-bg {
  stroke: var(--primary-gloss);
  /* slightly thicker track for better visibility */
  stroke-width: 8;
  fill: none;
}

.tres-progress-fill {
  stroke: var(--primary-color);
  /* primary visual weight but restrained */
  stroke-width: 8;
  fill: none;
  stroke-linecap: round;
  stroke-dasharray: 282; /* keep in sync with JS circumference */
  stroke-dashoffset: 282;
  transition: stroke-dashoffset 0.8s ease, stroke 0.25s ease;
}

.tres-progress-label {
  position: static;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.2rem;
  text-align: center;
}

.tres-percentage {
  /* Centered, subtle percentage inside ring */
  font-size: clamp(1.1rem, 3.8vw, 1.45rem);
  line-height: 1;
  font-weight: 700;
  color: var(--primary-color);
  opacity: 0.95; /* slightly muted relative to main headings */
  -webkit-font-smoothing:antialiased;
}

.tres-progress-text {
  font-size: 0.78rem;
  color: var(--text-tertiary);
  max-width: 160px;
  line-height: 1.15;
  opacity: 0.88;
  margin-top: 0;
}

/* Perfect Message (No Mistakes) */
.tres-perfect-message {
  width: 100%;
  max-width: 400px;
  padding: 1.8rem;
  margin: 1rem auto;
  text-align: center;
  font-size: 1.2rem;
  font-weight: 600;
  color: var(--primary-lighter);
  background: radial-gradient(circle at top left, var(--primary-gloss), transparent 60%), var(--surface-color);
  border: 1px solid var(--glass-border-strong);
  border-radius: 18px;
  backdrop-filter: blur(12px);
  box-shadow: 0 0 16px rgba(0, 0, 0, 0.4);
}

/* Mistake Cards */
.tres-mistake-card {
  width: 100%;
  padding: 1.6rem;
  border-radius: 16px;
  backdrop-filter: blur(10px);
  /* Softer border to reduce contrast across themes */
  border: 1px solid var(--glass-border);
  /* very subtle warm tint only as accent, not full-card red */
  background: radial-gradient(circle at top left, rgba(255, 80, 100, 0.03), transparent 60%), var(--surface-color);
  /* subtle accent line on the left */
  border-left: 3px solid rgba(255, 80, 100, 0.18);
  display: flex;
  flex-direction: column;
  gap: 1rem;
  transition: all 0.22s ease;
  box-shadow: 0 0 8px rgba(255, 80, 100, 0.06);
}

.tres-mistake-card:hover {
  border-left-color: rgba(255, 80, 100, 0.30);
  box-shadow: 0 0 14px rgba(255, 80, 100, 0.10);
}

.tres-mistake-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
}

.tres-mistake-word {
  font-size: 1.15rem;
  font-weight: 700;
  color: var(--primary-lighter);
  flex: 1;
}

.tres-fav-btn {
  /* visual alias: use same appearance as dict favorite button (see combined selector below) */
  flex-shrink: 0;
}

@keyframes heartBeat {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.tres-mistake-row {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.tres-label {
  font-size: 0.82rem;
  font-weight: 600;
  color: var(--text-tertiary);
  text-transform: uppercase;
  letter-spacing: 0.28px;
  opacity: 0.85;
}

.tres-answer {
  font-size: 1rem;
  padding: 0.75rem 0.9rem;
  border-radius: 10px;
  /* subtle neutral background that works across themes */
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.03);
  color: var(--text-secondary);
  font-weight: 600;
  word-break: break-word;
}

.wrong-answer {
  /* subtle accent for wrong answers */
  border-left: 3px solid rgba(255, 80, 100, 0.18);
}

.correct-answer {
  /* calm, theme-aware correct state */
  border-left: 3px solid rgba(255,255,255,0.06);
  color: var(--primary-lighter);
}

/* Restart button variants removed to enforce a single primary restart action (`tres_retry`) styled via `.test-main-btn`. */

/* ======================================= DICT SCREEN ====================================== */
#dict{
  display:flex;
  flex-direction:column;
  align-items:center;
  width:100%;
  height:100%;
  overflow:hidden;
}

#dict_scroll{
  flex:1;
  width:100%;
  overflow-y:auto;
  padding:1.6rem 0 var(--bottom-nav-h);
  -webkit-overflow-scrolling:touch;
  scrollbar-width:none;
  min-height:0;
  display:flex;
  flex-direction:column;
  align-items:center;
}

#dict_scroll::-webkit-scrollbar{
  display:none;
}

#dict_list{
  width:100%;
  max-width:400px;
  padding:0 1rem;
  display:flex;
  flex-direction:column;
  gap:0.9rem;
  align-items:stretch;
}

/* Dictionary item cards */
.dict-item{
  padding:1rem;
  border-radius:14px;
  backdrop-filter:blur(12px);
  border:1px solid var(--glass-border-strong);
  background:var(--glass-bg-light);
  display:flex;
  flex-direction:row;
  align-items:center;
  justify-content:space-between;
  gap:0.8rem;
  transition:.25s ease;
}

.dict-item:active{
  transform:scale(0.98);
  border-color:var(--glass-border-strong);
}

.dict-item-content{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:0.4rem;
}

.dict-item-ru{
  font-size:1.05rem;
  font-weight:600;
  color:var(--primary-lighter);
  line-height:1.5;
  margin:0;
}

.dict-item-en{
  font-size:0.9rem;
  color:var(--text-secondary);
  line-height:1.4;
  margin:0;
}

.dict-favbt, .tres-fav-btn, .favbt {
  font-size: 1.3rem;
  font-weight: 600;
  padding: 0.45rem 0.7rem;
  border-radius: 8px;
  cursor: pointer;
  background: var(--surface-color);
  border: 1px solid var(--glass-border-strong);
  color: var(--text-color);
  backdrop-filter: blur(12px);
  transition: transform .18s ease, filter .18s ease, border-color .18s ease;
  box-shadow: 0 6px 16px rgba(0,0,0,.45);
  flex-shrink: 0;
}

.dict-favbt:active, .tres-fav-btn:active, .favbt:active{
  transform: scale(.96);
}

.dict-favbt.fav, .tres-fav-btn.fav, .favbt.fav{
  color: var(--primary-light);
  border-color: var(--primary-glow);
}

.stats-actions{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:.7rem;
  margin-top:1.2rem;
}
/* ======================================= SETTINGS SCREEN ====================================== */
#settings {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  height: 100%;
  overflow: hidden;
}

#settings_scroll {
  flex: 1;
  width: 100%;
  overflow-y: auto;
  padding: 1.6rem 0 var(--bottom-nav-h);
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  min-height: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

#settings_scroll::-webkit-scrollbar {
  display: none;
}

#settings_scroll > .section-title {
  margin-bottom: 1.4rem;
}

.theme-grid {
  width: 100%;
  max-width: 420px;
  padding: 0 1rem;
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 1rem;
  align-items: start;
}

.theme-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0;
  cursor: pointer;
  padding: 1.4rem 0.8rem;
  border-radius: 999px;
  border: 2px solid transparent;
  min-height: 90px;
  position: relative;
  overflow: hidden;
  color: rgba(255, 255, 255, 0.82);
  transition: background .18s, color .18s, border-color .25s, box-shadow .25s;
}

.theme-preview {
  position: absolute;
  inset: 0;
  border-radius: 999px;
  opacity: 0.06;
  pointer-events: none;
  transition: opacity 0.25s ease;
}

.theme-item.active .theme-preview {
  opacity: 0.12;
}

.theme-item.active {
  background: linear-gradient(145deg, var(--surface-light), var(--surface-color));
  color: var(--primary-light);
  border-color: var(--primary-glow);
  box-shadow: 0 0 0 1px var(--primary-glow), 0 8px 22px rgba(0, 0, 0, 0.9), 0 0 14px var(--border-glow);
}

.theme-name {
  font-size: 0.82rem;
  font-weight: 600;
  color: inherit;
  text-align: center;
  letter-spacing: 0.3px;
  opacity: 0.9;
  transition: opacity 0.25s ease, color 0.25s ease;
  position: relative;
  z-index: 1;
}

/* ======================================= RESPONSIVE: iPad PORTRAIT (768px+) ====================================== */
@media (min-width: 768px) {
  .theme-grid {
    grid-template-columns: repeat(3, 1fr);
  }
  
  :where(#home, #cards, #dict, #settings) {
    padding-left: 20px !important;
    padding-right: 20px !important;
    max-width: 760px;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  :where(#test > .test-screen) {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Scroll containers centered */
  :where(#tres_scroll, #dict_scroll, #settings_scroll) {
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  #tres_list, #dict_list {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 20px;
    padding-right: 20px;
  }

  #settings_scroll {
    max-width: 100%;
    width: 100%;
  }

  #settings_scroll > * {
    max-width: 760px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 20px;
    padding-right: 20px;
  }

  /* Bottom nav centered */
  .pw-bnb {
    display: flex;
    justify-content: center;
  }

  .bnb-shell {
    max-width: 600px;
  }
}

/* ======================================= RESPONSIVE: iPad LANDSCAPE (1024px+) ====================================== */
@media (min-width: 1024px) {
  /* Unified centering for all screens - iPad landscape */
  :where(#home, #cards, #dict, #settings) {
    padding-left: 32px !important;
    padding-right: 32px !important;
    max-width: 1000px;
    margin-left: auto !important;
    margin-right: auto !important;
  }

  #test {
    padding-left: 32px !important;
    padding-right: 32px !important;
  }

  :where(#test > .test-screen) {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }

  /* Scroll containers centered */
  :where(#tres_scroll, #dict_scroll, #settings_scroll) {
    margin-left: auto;
    margin-right: auto;
    padding-left: 0;
    padding-right: 0;
  }

  #tres_list, #dict_list {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 32px;
    padding-right: 32px;
  }

  #settings_scroll {
    max-width: 100%;
    width: 100%;
  }

  #settings_scroll > * {
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
    padding-left: 32px;
    padding-right: 32px;
  }

  /* Bottom nav centered */
  .pw-bnb {
    display: flex;
    justify-content: center;
  }

  .bnb-shell {
    max-width: 700px;
  }
}